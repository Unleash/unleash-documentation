imports:
  root: __package__.yml
types:
  FrontendApiClientSchemaStarted:
    discriminated: false
    docs: When this client started. Should be reported as ISO8601 time.
    inline: true
    source:
      openapi: openapi.json
    union:
      - datetime
      - double
  FrontendApiFeaturesPostSchemaContext:
    docs: The Unleash context.
    extra-properties: true
    inline: true
    properties:
      appName:
        docs: The name of the application.
        type: optional<string>
        validation:
          minLength: 1
      currentTime:
        docs: >-
          A DateTime (or similar) data class instance or a string in an
          RFC3339-compatible format. Defaults to the current time if not set by
          the user.
        type: optional<datetime>
      environment:
        availability: deprecated
        docs: The environment the app is running in.
        type: optional<string>
      properties:
        docs: Additional Unleash context properties
        type: optional<map<string, string>>
      remoteAddress:
        docs: The app's IP address
        type: optional<string>
      sessionId:
        docs: An identifier for the current session
        type: optional<string>
      userId:
        docs: An identifier for the current user
        type: optional<string>
    source:
      openapi: openapi.json
docs: >-
  The [Frontend API](https://docs.getunleash.io/reference/front-end-api) is used
  for connecting client-side (frontend) applications to Unleash.
service:
  auth: false
  base-path: ''
  display-name: Frontend API
  endpoints:
    getFrontendApiFeaturesWithPost:
      display-name: Retrieve enabled feature flags for the provided context, using POST.
      docs: >-
        This endpoint returns the list of feature flags that the frontend API
        evaluates to enabled for the given context, using POST. Context values
        are provided as a `context` property in the request body. If the
        Frontend API is disabled 404 is returned.
      errors:
        - root.UnauthorizedError
        - root.NotFoundError
      examples:
        - request: {}
          response:
            body:
              toggles:
                - enabled: true
                  impressionData: false
                  name: disable-comments
                  variant:
                    enabled: true
                    feature_enabled: true
                    name: blue_group
                    payload:
                      type: json
                      value: '{"color": "red"}'
      method: POST
      path: /api/frontend
      request:
        body:
          properties:
            context:
              docs: The Unleash context.
              type: optional<FrontendApiFeaturesPostSchemaContext>
        content-type: application/json
        name: FrontendApiFeaturesPostSchema
      response:
        docs: frontendApiFeaturesSchema
        status-code: 200
        type: root.FrontendApiFeaturesSchema
      source:
        openapi: openapi.json
    getFrontendFeatures:
      display-name: Retrieve enabled feature flags for the provided context.
      docs: >-
        This endpoint returns the list of feature flags that the frontend API
        evaluates to enabled for the given context. Context values are provided
        as query parameters. If the Frontend API is disabled 404 is returned.
      errors:
        - root.UnauthorizedError
        - root.NotFoundError
      examples:
        - response:
            body:
              toggles:
                - enabled: true
                  impressionData: false
                  name: disable-comments
                  variant:
                    enabled: true
                    feature_enabled: true
                    name: blue_group
                    payload:
                      type: json
                      value: '{"color": "red"}'
      method: GET
      path: /api/frontend
      response:
        docs: frontendApiFeaturesSchema
        status-code: 200
        type: root.FrontendApiFeaturesSchema
      source:
        openapi: openapi.json
    registerFrontendClient:
      display-name: Register a client SDK
      docs: >-
        This is for future use. Currently Frontend client registration is not
        supported. Returning 200 for clients that expect this status code. If
        the Frontend API is disabled 404 is returned.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.NotFoundError
      examples:
        - request:
            appName: appName
            interval: 1.1
            started: '2024-01-15T09:30:00Z'
            strategies:
              - strategies
      method: POST
      path: /api/frontend/client/register
      request:
        body:
          properties:
            appName:
              docs: Name of the application using Unleash
              type: string
            environment:
              availability: deprecated
              docs: deprecated
              type: optional<string>
            instanceId:
              docs: >-
                Instance id for this application (typically hostname, podId or
                similar)
              type: optional<string>
            interval:
              docs: >-
                At which interval, in milliseconds, will this client be expected
                to send metrics
              type: double
            sdkVersion:
              docs: Optional field that describes the sdk version (name:version)
              type: optional<string>
            started:
              docs: When this client started. Should be reported as ISO8601 time.
              type: FrontendApiClientSchemaStarted
            strategies:
              docs: List of strategies implemented by this application
              type: list<string>
        content-type: application/json
        name: FrontendApiClientSchema
      source:
        openapi: openapi.json
    registerFrontendMetrics:
      display-name: Register client usage metrics
      docs: >-
        Registers usage metrics. Stores information about how many times each
        flag was evaluated to enabled and disabled within a time frame. If
        provided, this operation will also store data on how many times each
        feature flag's variants were displayed to the end user. If the Frontend
        API is disabled 404 is returned.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.NotFoundError
      examples:
        - request:
            appName: insurance-selector
            bucket:
              start: '2023-07-27T11:23:44Z'
              stop: '2023-07-27T11:23:44Z'
              toggles:
                myCoolToggle:
                  'no': 42
                  variants:
                    blue: 6
                    green: 15
                    red: 46
                  'yes': 25
                myOtherToggle:
                  'no': 100
                  'yes': 0
      method: POST
      path: /api/frontend/client/metrics
      request:
        body: root.ClientMetricsSchema
        content-type: application/json
      source:
        openapi: openapi.json
  source:
    openapi: openapi.json
