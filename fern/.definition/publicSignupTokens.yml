imports:
  root: __package__.yml
docs: >-
  Create, update, and delete [Unleash Public Signup
  tokens](https://docs.getunleash.io/reference/public-signup-tokens).
service:
  auth: false
  base-path: ''
  display-name: Public signup tokens
  endpoints:
    addPublicSignupTokenUser:
      display-name: Add a user via a signup token
      docs: >-
        Create a user with the viewer root role and link them to the provided
        signup token
      errors:
        - root.BadRequestError
        - root.ConflictError
      examples:
        - path-parameters:
            token: token
          request:
            email: hunter@example.com
            name: Hunter Burgan
            password: hunter2
          response:
            body:
              accountType: User
              activeSessions: 2
              createdAt: '2023-06-30T11:41:00Z'
              deletedSessions: 1
              email: user@example.com
              emailSent: false
              id: 123
              imageUrl: https://example.com/242x200.png
              inviteLink: http://localhost:4242/invite-link/some-secret
              loginAttempts: 3
              name: User
              permissions:
                - permissions
              rootRole: 1
              scimId: 01HTMEXAMPLESCIMID7SWWGHN6
              seenAt: '2023-06-30T11:42:00Z'
              username: hunter
      method: POST
      path: /invite/{token}/signup
      path-parameters:
        token: string
      request:
        body:
          properties:
            email:
              docs: The invited user's email address
              type: string
            name:
              docs: The user's name
              type: string
            password:
              docs: The user's password
              type: string
            username:
              docs: The user's username. Must be unique if provided.
              type: optional<string>
        content-type: application/json
        name: CreateInvitedUserSchema
      response:
        docs: userSchema
        status-code: 200
        type: root.UserSchema
      source:
        openapi: openapi.json
    createPublicSignupToken:
      display-name: Create a public signup token
      docs: >-
        Lets administrators create a invite link to share with colleagues. 
        People that join using the public invite are assigned the `Viewer` role
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
      examples:
        - request:
            expiresAt: '2024-01-15T09:30:00Z'
            name: name
          response:
            body:
              createdAt: '2023-04-12T11:13:31Z'
              createdBy: someone@example.com
              enabled: true
              expiresAt: '2023-04-12T11:13:31Z'
              name: Invite public viewers
              role:
                description: >-
                  Users with the editor role have access to most features in
                  Unleash but can not manage users and roles in the global
                  scope. Editors will be added as project owners when creating
                  projects and get superuser rights within the context of these
                  projects. Users with the editor role will also get access to
                  most permissions on the default project by default.
                id: 9
                name: Editor
                project: default
                type: root
              secret: a3c84b25409ea8ca1782ef17f94a42fc
              url: >-
                https://sandbox.getunleash.io/enterprise/new-user?invite=a3c84b25409ea8ca1782ef17f94a42fc
              users:
                - accountType: User
                  activeSessions: 2
                  createdAt: '2023-06-30T11:41:00Z'
                  deletedSessions: 1
                  email: user@example.com
                  emailSent: false
                  id: 123
                  imageUrl: https://example.com/242x200.png
                  inviteLink: http://localhost:4242/invite-link/some-secret
                  loginAttempts: 3
                  name: User
                  permissions:
                    - permissions
                  rootRole: 1
                  scimId: 01HTMEXAMPLESCIMID7SWWGHN6
                  seenAt: '2023-06-30T11:42:00Z'
                  username: hunter
      method: POST
      path: /api/admin/invite-link/tokens
      request:
        body:
          properties:
            expiresAt:
              docs: The token's expiration date.
              type: datetime
            name:
              docs: The token's name.
              type: string
        content-type: application/json
        name: PublicSignupTokenCreateSchema
      response:
        docs: The resource was successfully created.
        status-code: 201
        type: root.PublicSignupTokenSchema
      source:
        openapi: openapi.json
    getAllPublicSignupTokens:
      display-name: Get public signup tokens
      docs: Retrieves all existing public signup tokens.
      examples:
        - response:
            body:
              tokens:
                - createdAt: '2023-04-12T11:13:31Z'
                  createdBy: someone
                  enabled: false
                  expiresAt: '2023-04-12T11:13:31Z'
                  name: Invite public viewers
                  role:
                    description: >-
                      Users with the editor role have access to most features in
                      Unleash but can not manage users and roles in the global
                      scope. Editors will be added as project owners when
                      creating projects and get superuser rights within the
                      context of these projects. Users with the editor role will
                      also get access to most permissions on the default project
                      by default.
                    id: 3
                    name: Viewer
                    type: root
                  secret: a3c84b25409ea8ca1782ef17f94a42fc
                  url: >-
                    https://my_unleash_instance/new-user?invite=a3c84b25409ea8ca1782ef17f94a42fc
      method: GET
      path: /api/admin/invite-link/tokens
      response:
        docs: publicSignupTokensSchema
        status-code: 200
        type: root.PublicSignupTokensSchema
      source:
        openapi: openapi.json
    getPublicSignupToken:
      display-name: Retrieve a token
      docs: >-
        Get information about a specific token. The `:token` part of the URL
        should be the token's secret.
      errors:
        - root.UnauthorizedError
        - root.ForbiddenError
      examples:
        - path-parameters:
            token: token
          response:
            body:
              createdAt: '2023-04-12T11:13:31Z'
              createdBy: someone@example.com
              enabled: true
              expiresAt: '2023-04-12T11:13:31Z'
              name: Invite public viewers
              role:
                description: >-
                  Users with the editor role have access to most features in
                  Unleash but can not manage users and roles in the global
                  scope. Editors will be added as project owners when creating
                  projects and get superuser rights within the context of these
                  projects. Users with the editor role will also get access to
                  most permissions on the default project by default.
                id: 9
                name: Editor
                project: default
                type: root
              secret: a3c84b25409ea8ca1782ef17f94a42fc
              url: >-
                https://sandbox.getunleash.io/enterprise/new-user?invite=a3c84b25409ea8ca1782ef17f94a42fc
              users:
                - accountType: User
                  activeSessions: 2
                  createdAt: '2023-06-30T11:41:00Z'
                  deletedSessions: 1
                  email: user@example.com
                  emailSent: false
                  id: 123
                  imageUrl: https://example.com/242x200.png
                  inviteLink: http://localhost:4242/invite-link/some-secret
                  loginAttempts: 3
                  name: User
                  permissions:
                    - permissions
                  rootRole: 1
                  scimId: 01HTMEXAMPLESCIMID7SWWGHN6
                  seenAt: '2023-06-30T11:42:00Z'
                  username: hunter
      method: GET
      path: /api/admin/invite-link/tokens/{token}
      path-parameters:
        token: string
      response:
        docs: publicSignupTokenSchema
        status-code: 200
        type: root.PublicSignupTokenSchema
      source:
        openapi: openapi.json
    updatePublicSignupToken:
      display-name: Update a public signup token
      docs: >-
        Update information about a specific token. The `:token` part of the URL
        should be the token's secret.
      errors:
        - root.BadRequestError
        - root.UnauthorizedError
        - root.ForbiddenError
      examples:
        - path-parameters:
            token: token
          request: {}
          response:
            body:
              createdAt: '2023-04-12T11:13:31Z'
              createdBy: someone@example.com
              enabled: true
              expiresAt: '2023-04-12T11:13:31Z'
              name: Invite public viewers
              role:
                description: >-
                  Users with the editor role have access to most features in
                  Unleash but can not manage users and roles in the global
                  scope. Editors will be added as project owners when creating
                  projects and get superuser rights within the context of these
                  projects. Users with the editor role will also get access to
                  most permissions on the default project by default.
                id: 9
                name: Editor
                project: default
                type: root
              secret: a3c84b25409ea8ca1782ef17f94a42fc
              url: >-
                https://sandbox.getunleash.io/enterprise/new-user?invite=a3c84b25409ea8ca1782ef17f94a42fc
              users:
                - accountType: User
                  activeSessions: 2
                  createdAt: '2023-06-30T11:41:00Z'
                  deletedSessions: 1
                  email: user@example.com
                  emailSent: false
                  id: 123
                  imageUrl: https://example.com/242x200.png
                  inviteLink: http://localhost:4242/invite-link/some-secret
                  loginAttempts: 3
                  name: User
                  permissions:
                    - permissions
                  rootRole: 1
                  scimId: 01HTMEXAMPLESCIMID7SWWGHN6
                  seenAt: '2023-06-30T11:42:00Z'
                  username: hunter
      method: PUT
      path: /api/admin/invite-link/tokens/{token}
      path-parameters:
        token: string
      request:
        body:
          properties:
            enabled:
              docs: Whether the token is active or not.
              type: optional<boolean>
            expiresAt:
              docs: The token's expiration date.
              type: optional<datetime>
        content-type: application/json
        name: PublicSignupTokenUpdateSchema
      response:
        docs: publicSignupTokenSchema
        status-code: 200
        type: root.PublicSignupTokenSchema
      source:
        openapi: openapi.json
    validatePublicSignupToken:
      display-name: Validate signup token
      docs: >-
        Check whether the provided public sign-up token exists, has not expired
        and is enabled
      errors:
        - root.BadRequestError
      examples:
        - path-parameters:
            token: token
      method: GET
      path: /invite/{token}/validate
      path-parameters:
        token: string
      source:
        openapi: openapi.json
  source:
    openapi: openapi.json
